---
title: Implement value use state computation
status: closed
priority: 2
issue-type: task
created-at: "2026-01-07T09:09:20.940518+02:00"
closed-at: "2026-01-07T09:23:26.851874+02:00"
---

File: src/machinst/lower.zig add computeValueUses()
Purpose: Track if each SSA value used 0 times, 1 time, or multiple times
Why: Skip lowering dead code, enable single-use optimizations
Implementation:
1. Add ValueUseState enum: Unused, Once, Multiple
2. Add computeValueUses(func) â†’ SecondaryMap<Value, ValueUseState>
3. Iterate all instructions, track value uses
4. Store in LowerCtx
5. Check in lowering loop - skip if Unused
Dependencies: None
Estimated: 1 day
Test: Create IR with dead values, verify not lowered
