---
title: "P2.6: Atomic operations - design difference"
status: closed
priority: 2
issue-type: task
created-at: "2026-01-04T14:09:07.519471+02:00"
closed-at: "2026-01-05T16:38:40.467900+02:00"
---

File: src/backends/aarch64/lower.isle:688,2386-2452 - Hoist uses separate IR opcodes (atomic_rmw_add, atomic_rmw_sub, etc.) while Cranelift uses enum-based approach (atomic_rmw with AtomicRmwOp.Add). Both approaches are functionally equivalent. Hoist has 16 atomic patterns covering: load/store with acquire/release, 10 RMW ops, CAS, and fence. Cranelift adds: valid_atomic_transaction type checking, little_or_native_endian validation, use_lse conditionals. Consider if these validations should be added.
