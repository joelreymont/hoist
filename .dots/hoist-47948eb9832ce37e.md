---
title: Complete x64 ABI (stack args/varargs/probestack/unwind)
status: closed
priority: 1
issue-type: task
created-at: "2026-01-04T21:00:35.518260+02:00"
closed-at: "2026-01-05T11:20:48.229251+02:00"
---

Hoist x64 ABI is minimal (src/backends/x64/abi.zig:14-191) and lacks full arg locations, stack probing, and varargs/struct-return handling. Cranelift ABI logic is in ~/Work/wasmtime/cranelift/codegen/src/isa/x64/abi.rs:1-120. Root cause: ABI computation not ported beyond basic prologue/epilogue. Fix: port compute_arg_locs, probestack, varargs/struct-return rules, and unwind pseudoinsts; integrate with machinst ABI.
