---
title: Port NaN canonicalization pass
status: closed
priority: 2
issue-type: task
created-at: "2026-01-05T09:38:58.014247+02:00"
closed-at: "2026-01-05T11:24:49.812752+02:00"
---

File: Create src/codegen/opts/nan_canonicalization.zig from cranelift/codegen/src/nan_canonicalization.rs:1-125. Canonicalizes NaN representations for floating-point operations to ensure consistent behavior. Rewrites float ops to produce canonical NaNs. Root cause: float semantics pass missing. Fix: Port NaN canonicalization, add to optimize.zig pipeline before other passes.
