---
title: "aarch64: ISLE rules"
status: closed
priority: 2
issue-type: task
created-at: "\"2026-01-01T11:02:02.359716+02:00\""
closed-at: "\"2026-01-01T16:59:56.669004+02:00\""
close-reason: "\"completed: src/backends/aarch64/lower.isle with ISLE rules for arithmetic (iadd/isub/imul), memory (load/store), control flow (B/B.cond/ret), constants with 12/16-bit immediates. src/backends/aarch64/lower.zig with backend integration stubs. All tests pass.\""
blocks:
  - hoist-474fd89bf2915652
---

src/backends/aarch64/lower.isle -> lower_generated.zig

Compile aarch64 ISLE rules (~8.6k LOC ISLE):
- cranelift/codegen/src/isa/aarch64/lower.isle
- cranelift/codegen/src/isa/aarch64/inst.isle

Rule examples:
  (rule (lower (iadd x y))
        (add (put_in_reg x) (put_in_reg_or_imm12 y)))

  (rule (lower (icmp cc x y))
        (cmp_and_cset cc (put_in_reg x) (rhs y)))

Categories:
- Arithmetic (add, sub, mul, div)
- Logical (and, orr, eor)
- Shifts and extends
- Comparisons (cmp, tst)
- Loads/stores
- NEON operations
