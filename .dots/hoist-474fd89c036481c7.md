---
title: "aarch64: ABI"
status: closed
priority: 2
issue-type: task
created-at: "\"2026-01-01T11:02:02.355566+02:00\""
closed-at: "\"2026-01-01T16:56:15.868281+02:00\""
close-reason: "\"completed: src/backends/aarch64/abi.zig with AAPCS64 calling convention, prologue/epilogue generation, callee-save handling. All tests pass.\""
blocks:
  - hoist-474fd89be0902251
---

src/backends/aarch64/abi.zig (~1k LOC)

Port from: cranelift/codegen/src/isa/aarch64/abi.rs

AAPCS64 calling convention:

Arguments:
- X0-X7 for integers (64-bit each)
- V0-V7 for floats/vectors
- Stack for overflow, 8-byte aligned

Returns:
- X0 (+ X1 for 128-bit)
- V0 for floats

Preserved registers:
- X19-X28 (callee-saved)
- X29 = frame pointer
- X30 = link register

Frame layout:
- stp x29, x30, [sp, #-16]\!
- mov x29, sp
- Locals below frame pointer
