---
title: Implement multi_lane extractor
status: closed
priority: 2
issue-type: task
created-at: "2026-01-04T12:20:02.590215+02:00"
closed-at: "2026-01-04T12:24:03.990513+02:00"
---

File: src/isle/lowering_helpers.isle - Add multi_lane(bits: u32, lanes: u32) -> Type extractor. Returns Some((lane_bits, lane_count)) for vectors with lane_count > 1, None for scalars. Used in ~270 rules across Cranelift: Pattern A (exact match: multi_lane 8 16), Pattern B (wildcard: multi_lane _ _), Pattern C (partial match: multi_lane 32 _). Implementation validates ty.lane_count > 1, extracts (ty.lane_bits, ty.lane_count). See ~/Work/wasmtime/cranelift/codegen/src/isle_prelude.rs:500-506
