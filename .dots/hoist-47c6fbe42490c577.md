---
title: Insert prologue at entry, epilogue at returns
status: closed
priority: 2
issue-type: task
created-at: "2026-01-07T09:10:15.393436+02:00"
closed-at: "2026-01-07T10:45:20.750474+02:00"
---

File: src/machinst/vcode.zig modify emit() from first emit dot
Need: Insert prologue instructions at entry, epilogue before each return
Implementation: At entry block prepend prologue, find all return instructions and insert epilogue before each, adjust block boundaries
Dependencies: Previous emit dot
Estimated: 1 day
Test: Verify prologue/epilogue in correct positions
