---
title: Implement ty_vec128 extractor
status: closed
priority: 2
issue-type: task
created-at: "2026-01-04T12:20:08.461217+02:00"
closed-at: "2026-01-04T12:24:03.996604+02:00"
---

File: src/isle/lowering_helpers.isle - Add ty_vec128(ty: Type) -> Type extractor. Returns Some(ty) if ty.is_vector() && ty.bits() == 128, else None. Matches ALL 128-bit vectors (I8X16, I16X8, I32X4, I64X2, F32X4, F64X2). Used for size-based matching without caring about lane structure. See ~/Work/wasmtime/cranelift/codegen/src/isle_prelude.rs:425-432. Also add ty_vec128_int variant that additionally checks ty.lane_type().is_int() to exclude float vectors.
